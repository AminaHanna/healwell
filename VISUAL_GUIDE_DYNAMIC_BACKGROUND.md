# ğŸ¨ Visual Guide - Dynamic Service Background

## Admin Dashboard Flow

### Step 1: Navigate to Admin
```
Browser: http://localhost:3000/admin
         â†“
    Admin Dashboard Opens
         â†“
    Navigation Tabs Visible
```

### Step 2: Click Settings Tab
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ HealWell Admin                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ğŸ“Š] [ğŸ“] [ğŸ¥] [ğŸ’¼] [âš™ï¸ Settings]      â”‚
â”‚                        â†‘
â”‚                   Click Here
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 3: Upload Image
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Page Settings                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Service Listing Page                    â”‚
â”‚                                         â”‚
â”‚ Background Image                        â”‚
â”‚ Upload an image to customize...         â”‚
â”‚                                         â”‚
â”‚ [Choose Image] â† Click to select file   â”‚
â”‚                                         â”‚
â”‚ [Save Settings]                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 4: Image Preview
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Page Settings                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Service Listing Page                    â”‚
â”‚                                         â”‚
â”‚ Background Image                        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                                     â”‚ â”‚
â”‚ â”‚     [Image Preview Appears]         â”‚ â”‚
â”‚ â”‚                                     â”‚ â”‚
â”‚ â”‚     (Shows uploaded image)          â”‚ â”‚
â”‚ â”‚                                     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚ [Choose Image] [Save Settings]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 5: Save Settings
```
Click [Save Settings]
         â†“
    Uploading...
         â†“
    âœ… Settings saved successfully
         â†“
    Message disappears after 3 seconds
```

---

## Frontend Display

### Service Listing Page
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Service                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ OUR BEST SERVICE                        â”‚
â”‚ High-Quality Services This Doctor       â”‚
â”‚                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Service  â”‚ â”‚ Service  â”‚ â”‚ Service  â”‚ â”‚
â”‚ â”‚ Card 1   â”‚ â”‚ Card 2   â”‚ â”‚ Card 3   â”‚ â”‚
â”‚ â”‚          â”‚ â”‚          â”‚ â”‚          â”‚ â”‚
â”‚ â”‚ [BG IMG] â”‚ â”‚ [BG IMG] â”‚ â”‚ [BG IMG] â”‚ â”‚
â”‚ â”‚          â”‚ â”‚          â”‚ â”‚          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Service  â”‚ â”‚ Service  â”‚ â”‚ Service  â”‚ â”‚
â”‚ â”‚ Card 4   â”‚ â”‚ Card 5   â”‚ â”‚ Card 6   â”‚ â”‚
â”‚ â”‚          â”‚ â”‚          â”‚ â”‚          â”‚ â”‚
â”‚ â”‚ [BG IMG] â”‚ â”‚ [BG IMG] â”‚ â”‚ [BG IMG] â”‚ â”‚
â”‚ â”‚          â”‚ â”‚          â”‚ â”‚          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚ â†‘ All cards use dynamic background â†‘   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow Diagram

### Upload Process
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Admin Selects â”‚
â”‚ Image File   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Upload to Supabase       â”‚
â”‚ Storage (page-settings)  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Get Public URL           â”‚
â”‚ https://...              â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Save URL to Database     â”‚
â”‚ page_settings table      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Show Success Message     â”‚
â”‚ âœ… Settings saved       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Display Process
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Service Page Loads       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Fetch Page Settings      â”‚
â”‚ /api/page-settings       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Get Background Image URL â”‚
â”‚ from Database            â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Fetch Services from API  â”‚
â”‚ /api/services            â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Apply Background to      â”‚
â”‚ Service Cards            â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Display Service Cards    â”‚
â”‚ with Dynamic Background  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Component Hierarchy

```
AdminDashboard
â”œâ”€â”€ Header
â”œâ”€â”€ Navigation Tabs
â”‚   â”œâ”€â”€ Dashboard
â”‚   â”œâ”€â”€ Blog Posts
â”‚   â”œâ”€â”€ Services
â”‚   â”œâ”€â”€ Careers
â”‚   â””â”€â”€ Settings â† New Tab
â”‚       â””â”€â”€ PageSettingsManager
â”‚           â”œâ”€â”€ Settings Header
â”‚           â”œâ”€â”€ Settings Card
â”‚           â”‚   â”œâ”€â”€ Label
â”‚           â”‚   â”œâ”€â”€ Image Preview
â”‚           â”‚   â””â”€â”€ File Input
â”‚           â”œâ”€â”€ Message (Success/Error)
â”‚           â””â”€â”€ Save Button
â””â”€â”€ Main Content
```

---

## State Management

### PageSettingsManager State
```javascript
{
  settings: {
    service_listing_bg: "https://..."
  },
  imagePreview: {
    service_listing_bg: "https://..."
  },
  uploading: false,
  loading: false,
  message: ""
}
```

### Service Page State
```javascript
{
  services: [
    {
      backgroundImage: "https://...",
      title: "Service 1",
      // ... other properties
    },
    // ... more services
  ],
  backgroundImage: "https://...",
  loading: false
}
```

---

## API Request/Response

### GET Request
```
GET /api/page-settings?page_name=service_listing&setting_key=background_image

Response:
[
  {
    "id": "550e8400-e29b-41d4-a716-446655440000",
    "page_name": "service_listing",
    "setting_key": "background_image",
    "setting_value": "https://rdqczsmrxuzlouiflchq.supabase.co/storage/v1/object/public/page-settings/image.jpg",
    "created_at": "2025-10-19T10:00:00Z",
    "updated_at": "2025-10-19T10:00:00Z"
  }
]
```

### POST Request
```
POST /api/page-settings

Body:
{
  "page_name": "service_listing",
  "setting_key": "background_image",
  "setting_value": "https://rdqczsmrxuzlouiflchq.supabase.co/storage/v1/object/public/page-settings/image.jpg"
}

Response:
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "page_name": "service_listing",
  "setting_key": "background_image",
  "setting_value": "https://...",
  "created_at": "2025-10-19T10:00:00Z",
  "updated_at": "2025-10-19T10:00:00Z"
}
```

---

## File Structure

```
src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ admin/
â”‚   â”‚   â”œâ”€â”€ AdminDashboard.jsx â† Updated
â”‚   â”‚   â””â”€â”€ components/
â”‚   â”‚       â””â”€â”€ PageSettingsManager.jsx â† New
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ page-settings/
â”‚   â”‚       â””â”€â”€ route.js â† New
â”‚   â”œâ”€â”€ (innerpage)/
â”‚   â”‚   â””â”€â”€ service/
â”‚   â”‚       â””â”€â”€ page.jsx â† Updated
â”‚   â””â”€â”€ sass/
â”‚       â””â”€â”€ admin.scss â† Updated
â””â”€â”€ lib/
    â””â”€â”€ imageUpload.js (existing)
```

---

## User Journey

### Admin User
```
1. Login to Admin Dashboard
   â†“
2. Click Settings Tab
   â†“
3. See Service Listing Page Section
   â†“
4. Click Choose Image
   â†“
5. Select Image File
   â†“
6. See Image Preview
   â†“
7. Click Save Settings
   â†“
8. See Success Message
   â†“
9. Go to Service Page
   â†“
10. See New Background Image
```

### Regular User
```
1. Visit Service Page
   â†“
2. Page Loads
   â†“
3. Fetches Background Image from Database
   â†“
4. Service Cards Display with Background
   â†“
5. Sees Professional, Customized Page
```

---

## Success Indicators

âœ… **Admin Panel**
- Settings tab appears
- Image upload works
- Preview displays
- Save button functions
- Success message shows

âœ… **Frontend**
- Service page loads
- Background image appears
- Cards display correctly
- Image persists on refresh
- Fallback works if not configured

âœ… **Database**
- page_settings table exists
- Data saves correctly
- Queries are fast
- Indexes work properly

---

**Status**: âœ… Complete
**Date**: 2025-10-19


